[pytest]
testpaths = tests
addopts = --alluredir=allure-results --cov=tests --cov-report=html --cov-report=term-missing --strict-markers -ra -q --tb=short
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Custom markers for test organization
markers =
    unit: Unit tests with mocks and isolated components
    integration: Integration tests requiring multiple services
    requires_firefly: Tests requiring Firefly III service running
    requires_ai_service: Tests requiring AI categorizer service running
    requires_webhook_service: Tests requiring webhook service running
    requires_database: Tests requiring AI database running
    business_workflow: Tests validating end-to-end business workflows
    slow: Tests that may take longer to execute
    api: Tests for API endpoints
    ai: Tests for AI categorization functionality
    webhook: Tests for webhook processing
    database: Tests for database operations
    security: Tests for security and authentication
    performance: Tests for performance and scalability
    benchmark: Benchmark tests using pytest-benchmark
    github_actions: Tests suitable for GitHub Actions environment
    local_only: Tests that only run in local development

# Test timeout
timeout = 300
timeout_method = thread

# Filter warnings for cleaner output
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning

